---
title: 补码公式推导
date: 2024-10-30 11:36:13
tags:
---

why [负数]补码=[-负数]的补码,取反+1
[负数]补+[-负数]补=模，在时钟中，模为12，在定点小数中，模为2，在n位整数中模为2^n
例如：8位整数
[-1]补+[1]补 = 11111111+00000001=1 0000 0000 = 256 = 2^8
[-x]补+[x]补 = 2^n,假设x>0,so: [-x]补+[x]补=2^n,即[-x]补+x=2^n,so: [-x]补 = 2^n-x = (2^n-1-x)+1
即：
```
set x=1,[-x]补 = (2^8-1-x)+1 = (11111111-1)+1 = (11111111-00000001)+1
```
可以看到括号里面的00000001就是+1的补码，括号的结果就是+1的补码取反的结果
即：11111110，+1得到11111111
所以常说负数的补码等于其正数的补码取反+1

例外情况
从来如此，便一定对吗
还是内个熟悉的真值-128
假设按上面的求法，[-128]补=[128]补,取反+1
但是我们发现，128根本没有8位补码，所以只能用公式法求了，[x]补=x+256,即:
```
[-128]=-128+256=1 0000 0000 - 10000000 = (11111111 - 10000000)+1 = 10000000
```
会发现这个公式其实与上面的计算过程一样

所以[负数]补码=[正数]补码取反+1不太好
应为-128对应的负数不存在补码，但是，**[负数]补=[正数对应的二进制]取反+1**,这样就适用于任意情况了，这才是正确的公式